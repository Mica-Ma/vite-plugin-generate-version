# æµ‹è¯• generate-version åŠŸèƒ½

æœ¬æ–‡æ¡£ä»‹ç»å¦‚ä½•æµ‹è¯• `vite-plugin-generate-version` çš„åŠŸèƒ½ã€‚

## ğŸ“‹ æµ‹è¯•å‘½ä»¤

æˆ‘ä»¬æä¾›äº†å¤šä¸ªæµ‹è¯•å‘½ä»¤æ¥éªŒè¯æ’ä»¶åŠŸèƒ½ï¼š

### åŸºæœ¬æµ‹è¯•
```bash
# è¿è¡Œé»˜è®¤æµ‹è¯•ï¼ˆç”Ÿæˆæ‰€æœ‰æ–‡ä»¶ç±»å‹ï¼‰
npm test

# è¿è¡ŒåŸºæœ¬æµ‹è¯•ï¼ˆä»…ç”Ÿæˆ JSON å’Œ JS æ–‡ä»¶ï¼‰
npm run test:basic

# è¿è¡Œå®Œæ•´æµ‹è¯•ï¼ˆç”Ÿæˆæ‰€æœ‰æ–‡ä»¶ç±»å‹ï¼‰
npm run test:full

# è¿è¡Œæœ€å°æµ‹è¯•ï¼ˆä»…ç”Ÿæˆ JSONï¼Œä¸åŒ…å«ä½œè€…å’Œæäº¤æ—¥æœŸï¼‰
npm run test:minimal

# æ˜¾ç¤ºå¸®åŠ©ä¿¡æ¯
npm run test:help
```

### ç›´æ¥ä½¿ç”¨æµ‹è¯•è„šæœ¬
```bash
# ä½¿ç”¨é»˜è®¤é…ç½®
node test-generate-version.js

# è‡ªå®šä¹‰è¾“å‡ºç›®å½•å’Œæ–‡ä»¶ç±»å‹
node test-generate-version.js --path my-output --files json,ts

# æ’é™¤ä½œè€…ä¿¡æ¯å’Œæäº¤æ—¥æœŸ
node test-generate-version.js --no-author --no-commit-date

# ä½¿ç”¨ UTC æ—¶åŒº
node test-generate-version.js --timezone UTC

# æ˜¾ç¤ºå¸®åŠ©
node test-generate-version.js --help
```

## ğŸ”§ æµ‹è¯•é€‰é¡¹

| é€‰é¡¹ | æè¿° | é»˜è®¤å€¼ |
|------|------|--------|
| `--path <dir>` | è¾“å‡ºç›®å½• | `test-output` |
| `--files <types>` | æ–‡ä»¶ç±»å‹ï¼ˆé€—å·åˆ†éš”ï¼‰ | `json,js,txt,ts` |
| `--no-author` | ä¸åŒ…å«ä½œè€…ä¿¡æ¯ | åŒ…å« |
| `--no-commit-date` | ä¸åŒ…å«æäº¤æ—¥æœŸ | åŒ…å« |
| `--timezone <tz>` | æ—¶åŒºè®¾ç½® | `Asia/Shanghai` |

## ğŸ“‚ è¾“å‡ºæ–‡ä»¶

æµ‹è¯•ä¼šåœ¨æŒ‡å®šç›®å½•ä¸­ç”Ÿæˆä»¥ä¸‹æ–‡ä»¶ï¼š

- `version.json` - JSON æ ¼å¼çš„ç‰ˆæœ¬ä¿¡æ¯
- `version.js` - JavaScript æ¨¡å—æ ¼å¼çš„ç‰ˆæœ¬ä¿¡æ¯
- `version.txt` - äººç±»å¯è¯»çš„æ–‡æœ¬æ ¼å¼ç‰ˆæœ¬ä¿¡æ¯
- `version.ts` - TypeScript æ¨¡å—æ ¼å¼çš„ç‰ˆæœ¬ä¿¡æ¯

## ğŸ§ª ç¤ºä¾‹æµ‹è¯•

### è¿è¡Œæ’ä»¶ç¤ºä¾‹æµ‹è¯•
```bash
# è¿è¡Œæ’ä»¶é…ç½®ç¤ºä¾‹
node example/test-example.js
```

è¿™ä¸ªç¤ºä¾‹å±•ç¤ºäº†ï¼š
- åŸºæœ¬æ’ä»¶é…ç½®
- å®Œæ•´æ’ä»¶é…ç½®
- æœ€å°æ’ä»¶é…ç½®
- æ’ä»¶ç”Ÿå‘½å‘¨æœŸæ¨¡æ‹Ÿ

## ğŸ“Š æµ‹è¯•ç»“æœç¤ºä¾‹

è¿è¡Œæµ‹è¯•åï¼Œä½ ä¼šçœ‹åˆ°ç±»ä¼¼ä»¥ä¸‹çš„è¾“å‡ºï¼š

```
ğŸš€ å¼€å§‹æµ‹è¯• generate-version åŠŸèƒ½

ğŸ“‹ æµ‹è¯•é…ç½®:
  è¾“å‡ºç›®å½•: test-output
  æ–‡ä»¶ç±»å‹: json, js, txt, ts
  åŒ…å«ä½œè€…: true
  åŒ…å«æäº¤æ—¥æœŸ: true
  æ—¶åŒº: Asia/Shanghai

âš™ï¸ ç”Ÿæˆç‰ˆæœ¬æ–‡ä»¶...
âœ… ç‰ˆæœ¬æ–‡ä»¶å·²ç”Ÿæˆ: /path/to/test-output/version.json
âœ… ç‰ˆæœ¬æ–‡ä»¶å·²ç”Ÿæˆ: /path/to/test-output/version.js
âœ… ç‰ˆæœ¬æ–‡ä»¶å·²ç”Ÿæˆ: /path/to/test-output/version.txt
âœ… ç‰ˆæœ¬æ–‡ä»¶å·²ç”Ÿæˆ: /path/to/test-output/version.ts

âœ… æµ‹è¯•ç»“æœ:
  âœ… JSON æ–‡ä»¶ (1234 bytes)
  âœ… JS æ–‡ä»¶ (2345 bytes)
  âœ… TXT æ–‡ä»¶ (567 bytes)
  âœ… TS æ–‡ä»¶ (3456 bytes)

ğŸ“Š ç‰ˆæœ¬ä¿¡æ¯æ‘˜è¦:
  ç‰ˆæœ¬: main
  åˆ†æ”¯: main
  æäº¤: abc1234
  æ ‡ç­¾: æ— 
  ä½œè€…: machao
  æäº¤æ—¶é—´: 2025-09-17T10:30:00+08:00
  æ„å»ºæ—¶é—´: 2025-09-17 18:30:00

â±ï¸ æµ‹è¯•å®Œæˆï¼Œè€—æ—¶: 125ms
ğŸ‰ æ‰€æœ‰æµ‹è¯•å®Œæˆ!
```

## ğŸ› æ•…éšœæ’é™¤

### å¸¸è§é—®é¢˜

1. **ä¸æ˜¯ Git ä»“åº“é”™è¯¯**
   - ç¡®ä¿åœ¨ Git ä»“åº“ä¸­è¿è¡Œæµ‹è¯•
   - å¦‚æœä¸åœ¨ Git ä»“åº“ä¸­ï¼Œä¼šç”ŸæˆåŸºç¡€ç‰ˆæœ¬ä¿¡æ¯

2. **æ–‡ä»¶ç”Ÿæˆå¤±è´¥**
   - æ£€æŸ¥è¾“å‡ºç›®å½•æƒé™
   - ç¡®ä¿ç›®å½•è·¯å¾„æœ‰æ•ˆ

3. **Git å‘½ä»¤å¤±è´¥**
   - ç¡®ä¿ç³»ç»Ÿå®‰è£…äº† Git
   - æ£€æŸ¥ Git ä»“åº“çŠ¶æ€

### è°ƒè¯•æ¨¡å¼

ä½¿ç”¨ç¯å¢ƒå˜é‡å¯ç”¨è¯¦ç»†æ—¥å¿—ï¼š

```bash
DEBUG=true npm test
```

## ğŸ”„ æ¸…ç†æµ‹è¯•æ–‡ä»¶

æµ‹è¯•è„šæœ¬ä¼šè‡ªåŠ¨æ¸…ç†ä¹‹å‰çš„è¾“å‡ºæ–‡ä»¶ã€‚å¦‚éœ€æ‰‹åŠ¨æ¸…ç†ï¼š

```bash
# åˆ é™¤é»˜è®¤æµ‹è¯•è¾“å‡ºç›®å½•
rm -rf test-output

# åˆ é™¤ç¤ºä¾‹è¾“å‡ºç›®å½•
rm -rf example/output-*
```
